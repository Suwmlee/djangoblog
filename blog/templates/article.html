{% extends "base.html" %}
{% load comments %}

{% block content %}

<article>
    <header class="entry-header">
    <h1 class="entry-title">{{ blog.title }}</h1>
    </header><!-- .entry-header -->
    <div class="entry-content">
    {% autoescape off %}
        {{ blog.body }}
    {% endautoescape %}
    </div><!-- .entry-content -->
    <footer class="entry-meta">
    本文发布于 <a><time class="entry-date" >{{blog.timestamp}}</time></a>
    </footer><!-- .entry-meta -->
</article>
<nav class="nav-single">

<span class="nav-previous"><a href="/article/{{pre}}" rel="prev"><span class="meta-nav">&larr;</span>上一篇</a></span>
<span class="nav-next"><a href="/article/{{nex}}" rel="next">下一篇 <span class="meta-nav">&rarr;</span></a></span>
</nav><!-- .nav-single -->

<div id="comments" class="comments-area">

    {% get_comment_count for blog as comment_count %}    
        <h2 class="muted comtop" >{{ comment_count }} Comments</h2>
        <hr class="soften">  
    {% get_comment_list for blog as blog_com %}
<ol class="commentlist">
    {% for comment in blog_com %}
    <li>
    <article  class="comment">
    <header class="comment-meta comment-author vcard">
    <img alt='' src='https://www.djangoproject.com/s/img/site/hdr_logo.b19c5e60269d.gif' height='44' width='44' />
        <cite>{{ comment.name }}</cite>
        <time>{{ comment.submit_date|date:"F,j,Y" }} </time>
    </header><!-- .comment-meta -->

        {% autoescape off %}
            {{ comment.comment }}           
        {% endautoescape %}
    </article><!-- #comment-## -->
    </li>
    {% endfor %}
</ol><!-- .commentlist -->

{%get_comment_form for blog as form%}
<form action='{%comment_form_target%}' method='post'>
    {% csrf_token %}
    {{form.object_pk}}
    {{form.content_type}}
    {{form.timestamp}}
    {{form.security_hash}}
    <p><label for="id_name">姓名：</label><input type="text" id="id_name" class="input-xlarge" name="name" placeholder="please enter name" required="required"></p>
    <p><label for="id_email">邮箱：</label><input class="input-xlarge" id="id_email" type="email" name="email" placeholder="please enter email" required="required"></p>
    <p><label for="id_comment">评论：</label></p>
    <p><textarea id="id_comment" rows="15" cols="80" name="comment"></textarea></p>
    <p style="display:none;"><label for="id_honeypot">如果你在该字段中输入任何内容，那么你的评论就会被视为垃圾评论。</label> <input type="text" name="honeypot" id="id_honeypot"></p>
    <p><input name="post" value="发表" type="submit" /></p>
    <input type='hidden' name='next' value='{% url showcomment blog.id %}'/>
</form>


</div>



{% endblock %}

{% block linking %}
   <ul>
{% for link in links %}
        <li> <a href="{{link.body}}" >{{ link.title }}</a>  </li>
{% endfor %}
    </ul>
{% endblock %}


{% block recent-post %}
   <ul>
{% for post in posts %}
        <li> <a href="/article/{{post.id}}" >{{ post.title }}</a> </li>
{% endfor %}
    </ul>
{% endblock %}
